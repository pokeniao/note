---
日期: 2024-03-19
aliases:
  - Vue
tags:
  - 开发经验
---
# 父子之间的传递参数（Vue3的组件通讯）
- [x] 方法用过 ✅ 2024-03-19
1. Props和Events传递
	- **父传子Props**： 子绑定 `:message="传入的值"` 子通过定义`props: ['message']`
> [!NOTE]- 解释
>`props: ['message']` 的作用是定义了一个名为 `message` 的prop。这意味着父组件可以通过 `message` 这个prop向子组件传递数据。子组件可以在其模板中使用 `message` 来访问从父组件传递过来的数据。
>`props: ['message']` 声明了一个名为 `message` 的prop，它告诉Vue组件需要接收一个名为 `message` 的属性。

**代码示例**

```vue fold:"父传子Props"
<!-- ParentComponent.vue -->
<template>
  <ChildComponent :message="parentMessage" @updateMessage="handleUpdateMessage" />
</template>

<script>
import ChildComponent from './ChildComponent.vue';

export default {
  components: {
    ChildComponent
  },
  data() {
    return {
      parentMessage: 'Hello from parent'
    };
  },
  methods: {
    handleUpdateMessage(message) {
      this.parentMessage = message;
    }
  }
};
</script>
--------------------------------------------------------------------------------
<!-- ChildComponent.vue -->
<template>
  <div>
    <p>{{ message }}</p>
  </div>
</template>

<script>
export default {
  props: ['message']
};
</script>

```

- **子传父Events传递**：子通过`this.$emit('messageToParent', 'Hello from child');` 发送，父监听`@messageToParent="handleMessageFromChild"`
	
> [!NOTE]- 解释
> 子组件可以通过==触发事件==来传递数据给父组件。父组件==通过监听==这些事件来执行相应的处理逻辑。
> `'messageToParent'` 是要触发的事件的名称，这里是自定义的事件名称
> `'Hello from child'` 是要传递给父组件的数据，可以是任何你想要传递的值

```vue fold:"子传父Events"
<template>
  <button @click="sendMessageToParent">Send Message to Parent</button>
</template>

<script>
export default {
  methods: {
    sendMessageToParent() {
      this.$emit('messageToParent', 'Hello from child');
    }
  }
  
};
</script>
--------------------------------------------------------------------------------
<template>
  <ChildComponent @messageToParent="handleMessageFromChild" />
</template>

<script>
import ChildComponent from './ChildComponent.vue';

export default {
  components: {
    ChildComponent
  },
  methods: {
    handleMessageFromChild(message) {
      console.log('Message from child:', message);
    }
  }
};
</script>

```

需要注意：`this.$emit` 只能使用在`methods:{}` 中 而不能使用在 `setup(){}`中,在setup中需要写成
```vue fold:"emit('GetData',resp.data.content)"
<script>
setup(props,{emit}) {
	const SendTypeNameMethod = (typeName) => {
		emit('GetData',resp.data.content);
	}
}
</script>
```
*原因*：[[Vue#setup和methods]] 上述代码还用了解构赋值[^解构赋值]

[^解构赋值]: [[Vue#解构赋值]] 